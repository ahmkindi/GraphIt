@inherits CanvasBase

<SfContextMenu Items="@ContextMenus.NodeItems" @ref="ContextMenus.NodeMenu">
    <MenuEvents TValue="MenuItem" ItemSelected="@Select"></MenuEvents>
</SfContextMenu>
<SfContextMenu Items="@ContextMenus.CanvasItems" @ref="ContextMenus.CanvasMenu">
    <MenuEvents TValue="MenuItem" ItemSelected="@Select"></MenuEvents>
</SfContextMenu>
<SfContextMenu Items="@ContextMenus.EdgeItems" @ref="ContextMenus.EdgeMenu">
    <MenuEvents TValue="MenuItem" ItemSelected="@Select"></MenuEvents>
</SfContextMenu>

<svg viewBox="@SVGControl.Xaxis @SVGControl.Yaxis @((int)((double)Browser.Width*SVGControl.Scale)) @((int)((double)Browser.Height*SVGControl.Scale))" 
     tabindex="0" class="@SvgClass" @ref="svgCanvas" @onmousemove="OnMove" @onmousedown="OnMouseDown" @onkeyup="OnKeyUp" 
     @oncontextmenu="OnRightClick" @oncontextmenu:preventDefault="true" @onmouseup="OnMouseUp" @onmousewheel="OnScroll" @onwheel="OnScroll">
    @if (Nodes != null)
    {
        @if (Edges != null)
        {
            foreach (Edge edge in Edges)
            {
                <EdgeLine Edge="edge" ActiveNode="ActiveNode" ActiveEdge="ActiveEdge" OnEdgeClick="OnEdgeClick" OnEdgeRightClick="OnEdgeRightClick" DefaultOptions="DefaultOptions"></EdgeLine>
            }
        }
        foreach (Node node in Nodes)
        {

            if ((ActiveNode != null && node.NodeId == ActiveNode.NodeId))
            {
                continue;
            }
            <NodeCircle Node="node" ActiveNode="ActiveNode" OnNodeClick="OnNodeClick" OnNodeRightClick="OnNodeRightClick"></NodeCircle>
        }
        if (ActiveNode != null)
        {
            <NodeCircle Node="ActiveNode" ActiveNode="ActiveNode" OnNodeClick="OnNodeClick" OnNodeRightClick="OnNodeRightClick"></NodeCircle>
        }
    }
</svg>
@if (NewEdge.GetEdgeWeight)
{
    <SfDialog Width="300px" IsModal="true">
        <DialogTemplates>
            <Content>
                <SfNumericTextBox Min=1 Placeholder="Edge Weight" FloatLabelType="@FloatLabelType.Auto" @bind-Value="NewEdge.Weight"></SfNumericTextBox>
                <SfButton CssClass="e-success" @onclick="(() => AddNewEdge(true))">Done</SfButton>
                <SfButton CssClass="e-danger" @onclick="(() => AddNewEdge(false))">Cancel</SfButton>
            </Content>
        </DialogTemplates>
    </SfDialog>
}
